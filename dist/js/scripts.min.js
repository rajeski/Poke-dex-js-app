var pokemonRepository=(()=>{var e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=150",o=$(".overlay"),n=$(".modal"),a=$(".pokeman-name"),l=$(".pokemon-img"),s=$(".pokemon-height"),i=$(".pokemon-weight"),r=$(".pokemon-types");function p(){n.removeClass("modal-visible"),o.removeClass("overlay-visible"),n.addClass("modal"),a.text(""),l.attr("src",""),s.text(""),i.text("")}return $(".modal-close").on("click",()=>{p()}),$(document).keyup(function(e){console.log("PRSSES",e),"Escape"===e.key&&n.hasClass("modal-visible")&&p()}),o.on("click",e=>{var t=e.target;console.log(t),t===o&&p()}),{loadList:function(){return $.ajax(t).then(function(t){t.results.forEach(function(t){!function(t){e.push(t)}({name:t.name,detailsUrl:t.url})})}).catch(function(e){console.error(e)})},loadDetails:function(e){var t=e.detailsUrl;return fetch(t).then(e=>e.json()).then(t=>{console.log("jSON",t),e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=[];for(var o=0;o<t.types.length;o++)e.types.push(t.types[o].type.name)}).catch(e=>console.log(e))},addListItem:function(e){var t=$(".pokemon-list"),p=$("<li>"),c=$('<button class="list-button">').text(e.name);t.append(p),p.append(c),c.on("click",function(t){var p;p=e,pokemonRepository.loadDetails(p).then(()=>{n.addClass("modal-visible"),o.addClass("overlay-visible"),n.removeClass("modal"),a.text(p.name),l.attr("src",p.imageUrl),s.text(p.height),i.text(p.weight),r.text(p.types)})})},hideDetails:p,getAll:function(){return e}}})();pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>{pokemonRepository.addListItem(e)})});